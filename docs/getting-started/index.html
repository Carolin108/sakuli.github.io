
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name=”description” content=””>
    <meta name=”robots” content=”index, follow”>
    <title>
        Sakuli End-to-End Testing + Monitoring | Getting started
    </title>
    <meta property=”og:title” content=”Sakuli | ZgotmplZ” />
    <meta property=”og:description” content=”” />
    <meta property=”og:image” content=”/images/sakuli_hero.png” />
    <meta property=”og:site_name” content=”Sakuli End-to-End Testing and Monitoring” />

    <meta name=”twitter:title” content=”Sakuli | ZgotmplZ”>
    <meta name=”twitter:description” content=””>
    <meta name=”twitter:image” content=”/images/sakuli_hero.png”> <meta name=”twitter:site” content=”@sakuli_e2e”>



    
    
    <link rel="stylesheet" href="/style.css" integrity=”” />
    <link rel="stylesheet" href="/vue/index.css" />

    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139547974-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-139547974-1');
    </script>


    
    
    <script lang="text/javascript">
        var ua = window.navigator.userAgent;
        var version = ieVersion(ua);
        if(version && version >= 10 && version <= 11) {
            document.write('<script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=Object.assign%2CArray.from%2CPromise%2Cfetch"><\/script>');
            document.write('<link rel="stylesheet" href="\/ie.css" integrity=”” />')
        }
        function ieVersion(uaString) {
            uaString = uaString || navigator.userAgent;
            var match = /\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(uaString);
            if (match) return parseInt(match[2])
        }
    </script>


</head>

<body>
    <a href="https://www.github.com/sakuli/sakuli" target="_blank" class="github-corner"
        aria-label="View source on GitHub">
        <svg width="70" height="70" viewBox="0 0 250 250"
            style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
                d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
                d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                fill="currentColor" class="octo-body"></path>
        </svg></a>
    <style>
        .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }

        @keyframes octocat-wave {

            0%,
            100% {
                transform: rotate(0)
            }

            20%,
            60% {
                transform: rotate(-25deg)
            }

            40%,
            80% {
                transform: rotate(10deg)
            }
        }

        @media (max-width:500px) {
            .github-corner:hover .octo-arm {
                animation: none
            }

            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out
            }
        }
    </style>
    <header>


        <div class="banner-corner">
            <a href="/">
                <svg width="60px" height="60px" version="1.1" id="el_33VhVOlhh" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 283 283"
                    enable-background="new 0 0 283.46 283.46" xml:space="preserve">
                    <style>
                        @-webkit-keyframes kf_el_zLp-eZHf9H_an_08tqQJTbr {
                            0% {
                                -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
                                transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
                            }

                            33.33% {
                                -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                                transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                            }

                            100% {
                                -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                                transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                            }
                        }

                        @keyframes kf_el_zLp-eZHf9H_an_08tqQJTbr {
                            0% {
                                -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
                                transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
                            }

                            33.33% {
                                -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                                transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                            }

                            100% {
                                -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                                transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
                            }
                        }

                        #el_33VhVOlhh * {
                            -webkit-animation-duration: 3s;
                            animation-duration: 3s;
                            -webkit-animation-iteration-count: 1;
                            animation-iteration-count: 1;
                            -webkit-animation-play-state: running;
                            animation-play-state: running;
                            -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);
                            animation-timing-function: cubic-bezier(0, 0, 1, 1);
                        }

                        #el_zLp-eZHf9H {
                            fill: #95C11F;
                        }

                        #el_33VhVOlhh:hover #el_zLp-eZHf9H {}

                        #el_rscYgXSW76 {
                            visibility: hidden;
                        }

                        #el_ELwiMJ6WZY {
                            visibility: hidden;
                        }

                        #el_0KllcPOMi_ {
                            visibility: hidden;
                        }

                        #el_srYemrCGoT {
                            visibility: hidden;
                        }

                        #el_Rf8EvIwiTj {
                            visibility: hidden;
                        }

                        #el_LBd_rRl8Bh {
                            visibility: hidden;
                        }

                        #el_zLp-eZHf9H_an_08tqQJTbr {
                            -webkit-animation-fill-mode: backwards;
                            animation-fill-mode: backwards;
                            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
                            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
                            -webkit-animation-timing-function: cubic-bezier(0.42, 0, 0.58, 1);
                            animation-timing-function: cubic-bezier(0.42, 0, 0.58, 1);
                        }

                        #el_33VhVOlhh:hover #el_zLp-eZHf9H_an_08tqQJTbr {
                            -webkit-animation-name: kf_el_zLp-eZHf9H_an_08tqQJTbr;
                            animation-name: kf_el_zLp-eZHf9H_an_08tqQJTbr;
                        }
                    </style>
                    <g id="el_zLp-eZHf9H_an_08tqQJTbr" data-animator-group="true" data-animator-type="1">
                        <path d="M141.41,1.31C64.04,1.31,1.09,64.25,1.09,141.62s62.95,140.32,140.31,140.32
                        c77.37,0,140.31-62.95,140.31-140.32S218.78,1.31,141.41,1.31z M131.87,118.32c5.85,3.75,7.55,11.52,3.8,17.37
                        c-2.4,3.75-6.46,5.79-10.6,5.79c-2.32,0-4.67-0.64-6.77-1.99l-39.43-25.27c-6.65-4.26-10.62-11.52-10.62-19.43
                        c0-7.9,3.97-15.17,10.63-19.43L118.3,50.1c5.85-3.75,13.63-2.04,17.37,3.8c3.75,5.85,2.05,13.63-3.8,17.37L95.17,94.8L131.87,118.32
                        z M204.75,203.85l-39.43,25.27c-2.1,1.35-4.45,1.99-6.77,1.99c-4.14,0-8.2-2.04-10.6-5.79c-3.75-5.85-2.05-13.63,3.8-17.37
                        l36.7-23.52l-36.7-23.52c-5.85-3.75-7.55-11.52-3.8-17.37c3.74-5.85,11.53-7.55,17.37-3.8l39.43,25.27
                        c6.65,4.26,10.62,11.53,10.62,19.43C215.37,192.32,211.4,199.59,204.75,203.85z"
                            id="el_zLp-eZHf9H"></path>
                    </g>
                </svg>
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="https://consol.github.io/sakuli/latest">Docs (v1)</a></li>
                <li><a href="/enterprise">Enterprise</a></li>
            </ul>
        </nav>
    </header>
    <main>


<h1>Getting started</h1>
<div class="page">
    <aside>
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#initialisation">Initialisation</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#sakuli-installation">Sakuli Installation</a></li>
<li><a href="#webdriver-installation">WebDriver Installation</a></li>
</ul></li>
<li><a href="#setup-your-first-test">Setup your first test</a></li>
<li><a href="#write-your-first-test">Write your first Test</a></li>
<li><a href="#execute-your-first-test">Execute your first test</a>
<ul>
<li><a href="#npx-https-www-npmjs-com-package-npx"><a href="https://www.npmjs.com/package/npx">npx</a></a></li>
<li><a href="#npm-test">npm test</a></li>
<li><a href="#global-installation">Global installation</a></li>
<li><a href="#congratulations">Congratulations!</a></li>
</ul></li>
<li><a href="#getting-started-with-native-interactions">Getting started with native interactions</a></li>
</ul></li>
</ul>
</nav>
    </aside>
    <article class="shrink-content">
        

<h2 id="prerequisites">Prerequisites</h2>

<p>Sakuli is built and tested against the current LTS version of Node.js.
So in order to run Sakuli on your system, we will assume that you have a node v10.15.3 (lts/dubnium) installed on your system.</p>

<p>To install Node.js on your system, you can either go the <a href="https://nodejs.org/en/">node website</a>, or you could use <a href="https://github.com/nvm-sh/nvm">node version manager</a>, a utility to manage various node versions.</p>

<h2 id="initialisation">Initialisation</h2>

<p>This guide will get you started with writing Sakuli tests from scratch.
To follow the tutorial, you should create a new npm project in an empty folder.</p>

<p>For this guide, we will assume that our working directory is <code>/tmp/sakuli_starter</code> on a *nix system, or <code>%Temp%\sakuli_starter</code> on a Windows machine, respectively.</p>

<p>To create a new, empty project, first run:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm init</code></pre></div>

<p>This interactive prompt will ask you for some metadata regarding your project.
You can either modify these fields to your needs, or just accept the defaults.</p>

<p>Once completed you should see a short summary similar to the following snippet:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">About to write to /tmp/sakuli_starter/package.json:

<span style="color:#f92672">{</span>
  <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;sakuli_starter&#34;</span>,
  <span style="color:#e6db74">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.0.0&#34;</span>,
  <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#e6db74">&#34;main&#34;</span>: <span style="color:#e6db74">&#34;index.js&#34;</span>,
  <span style="color:#e6db74">&#34;scripts&#34;</span>: <span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;test&#34;</span>: <span style="color:#e6db74">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
  <span style="color:#f92672">}</span>,
  <span style="color:#e6db74">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#e6db74">&#34;license&#34;</span>: <span style="color:#e6db74">&#34;ISC&#34;</span>
<span style="color:#f92672">}</span>


Is this OK? <span style="color:#f92672">(</span>yes<span style="color:#f92672">)</span></code></pre></div>

<p>After confirming the prompt, an empty project has been initialized.</p>

<h2 id="installation">Installation</h2>

<p>The following steps are required to set up Sakuli to work with a multitude of browsers.
Once the initial setup is done, we will dive right into our first test.</p>

<h3 id="sakuli-installation">Sakuli Installation</h3>

<p>Still in our newly created project, we will install Sakuli by running</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i @sakuli/cli</code></pre></div>

<p>or</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">yarn add @sakuli/cli</code></pre></div>

<p>This will install Sakuli and its required dependencies.</p>

<p>One of Sakulis core components, <a href="https://github.com/nut-tree/nut-js">nut.js</a>, requires OpenCV.
As of now the installation process assumes you do not have an existing OpenCV installation and will try to build it from source via <a href="https://github.com/justadudewhohacks/opencv4nodejs">opencv4nodejs</a>.</p>

<p>Building OpenCV from scratch requires a <a href="https://cmake.org/">cmake</a> installation.</p>

<p>In case you already have an OpenCV installation (version 3.x.x required, e.g. via <code>brew install opencv@3</code> or <a href="https://docs.opencv.org/3.4/df/d65/tutorial_table_of_content_introduction.html">else</a>), you can disable the build process via environment variable:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export OPENCV4NODEJS_DISABLE_AUTOBUILD<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span></code></pre></div>

<p>on *nix systems, or</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">set OPENCV4NODEJS_DISABLE_AUTOBUILD<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span></code></pre></div>

<p>on Windows.</p>

<p>Please make sure to also install all required peer dependencies:</p>

<ul>
<li><a href="https://github.com/justadudewhohacks/opencv4nodejs#how-to-install">opencv4nodejs</a></li>
<li><a href="http://robotjs.io/docs/building">robotjs</a></li>
</ul>

<p>The installation process is an open issue and will be enhanced in the near future, so using Sakuli becomes even more enjoyable!</p>

<h3 id="webdriver-installation">WebDriver Installation</h3>

<p>Sakuli utilizes the <a href="https://www.w3.org/TR/webdriver1/">WebDriver protocol</a> to remote control browsers during test execution.
In addition to the browser itself, you need to install the corresponding WebDriver as well.
Several wrapper packages can be found on <a href="https://npmjs.com">npmjs.com</a>, which allow to install the required binaries via <code>npm</code>.</p>

<p>To run tests on Chrome, a suitable WebDriver can be installed via</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i chromedriver</code></pre></div>

<p>or</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">yarn add chromedriver</code></pre></div>

<p>Alternatively, to run tests on FireFox:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i geckodriver</code></pre></div>

<p>or</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">yarn add geckodriver</code></pre></div>

<p>There are also WebDriver packages for <a href="https://www.npmjs.com/package/iedriver">IE</a> and <a href="https://www.npmjs.com/package/edgedriver">Edge</a>.
macOS already ships a WebDriver for Safari, so there&rsquo;s no need to install an additional package.</p>

<p><strong>Attention:</strong> Be careful to install the correct version of a WebDriver package for your installed browser version. To install e.g. ChromeDriver for Chrome 73 you have to install</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i chromedriver@73.0.0</code></pre></div>

<p>Sakuli is not limited to work with only a single browser.
When installing multiple WebDriver packages, you can easily switch between multiple browsers.</p>

<h2 id="setup-your-first-test">Setup your first test</h2>

<p>Since we wanted to keep Sakuli compatible to V1 the file layout looks basically the same for test suites.</p>

<p>Each Testsuite is located in a dedicated folder. A common practice is that a testsuite represents the system you want to test, so you need to create that folder in your project root (where the package.json file is located):</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir my-sut</code></pre></div>

<p>To describe the testsuite with its testcases two additional files are required: <code>testsuite.properties</code> and <code>testsuite.suite</code>. This files are required for backwards compatibility (they might not be necessary in the future but will at least be supported). This files should be added to the <code>my-sut</code> folder.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd my-sut
touch testsuite.suite
touch testsuite.properties</code></pre></div>

<p>we can add the following contents to <code>testsuite.properties</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;testsuite.id=my-sut&#34;</span> &gt;&gt; testsuite.properties</code></pre></div>

<p>This is the minimum configuration for Sakuli. The .properties files adds some metainformation for the Sakuli-Runtime and can further be used to configure other things like forwarder or the default browser of the execution.</p>

<p>The <code>testsuite.suite</code> file tells Sakuli which testcases take place in this testsuite. The format is:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;FOLDER-NAME&gt;/&lt;FILE-NAME&gt;.js &lt;START_URL&gt;</code></pre></div>

<p>The actual testcase file must be placed inside a folder (this is due to the format which was forced by Sahi in Sakuli V1). The starturl also needs to be added but has no effect in V2+.</p>

<p>With this in mind we can add a testcase file:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir my-testcase
touch my-testcase/testcase.js</code></pre></div>

<p>and add this information to the <code>testsuite.suite</code> file:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;my-testcase/testcase.js https://sakuli.io&#34;</span> &gt;&gt; testsuite.suite</code></pre></div>

<p>after this setup you can add the actual testcode to <code>my-testcase/testcase.js</code>:</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 1
</span></span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 2
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 5
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 6
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 7
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 8
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">10
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">11
</span></span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="display:block;width:100%;background-color:#3c3d38">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {  <span style="color:#75715e">// 1
</span></span><span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">testCase</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>(); <span style="color:#75715e">// 2
</span></span><span style="color:#75715e"></span>    <span style="color:#66d9ef">try</span> {
        <span style="color:#75715e">// actual test code goes here
</span><span style="color:#75715e"></span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>); <span style="color:#75715e">// 3
</span></span><span style="color:#75715e"></span>    } <span style="color:#66d9ef">finally</span> {
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">saveResult</span>(); <span style="color:#75715e">// 4
</span></span><span style="color:#75715e"></span>    }

<span style="display:block;width:100%;background-color:#3c3d38">})().<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">done</span>); <span style="color:#960050;background-color:#1e0010">// 5</span></span></code></pre></td></tr></table>
</div>
</div>

<p>Let´s examine this piece of code:</p>

<ol>
<li>The whole test is wrapped in a async immediate invoked function, it allows us to use async / await syntax of ES6. Since Sakuli makes heavy use of async operations it makes your code more readable.</li>
<li>To provide Sakuli information about our actual testcase we create a TestCase object, which handles the execution of a testcase.</li>
<li>If any error occured during your testcode this error is redireced to the Testcase object. It triggers Sakulis internal error handling e.g. taking a screenshot in the actual errored situation</li>
<li>Regardless of a failed or passed test execution Sakuli saves its results. This is more like legacy artifact and will be removed in the future.</li>
<li>When the async code whitin the main function (see 1.) is completed, a callback passed to the <code>then</code> function is invoked. <code>done</code> is a global funtion which is injected by Sakuli and tells the engine that the testexecution is over (in theory you could call this function <code>done()</code> but this syntax above is recommended).</li>
</ol>

<h2 id="write-your-first-test">Write your first Test</h2>

<p>Let´s write a simple test using the Sakuli.io homepage. This test will verify that our &ldquo;Getting Started&rdquo; guide you are reading at the very moment is still accessible.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 1
</span></span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 2
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 5
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 6
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 7
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 8
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">10
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">11
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="display:block;width:100%;background-color:#3c3d38">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
</span><span style="display:block;width:100%;background-color:#3c3d38">    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">testCase</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>();
</span>    <span style="color:#66d9ef">try</span> {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_navigateTo</span>(<span style="color:#e6db74">&#34;https://sakuli.io&#34;</span>);                  <span style="color:#75715e">// 1
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#34;Open Landing Page&#34;</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>);          <span style="color:#75715e">// 2
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#75715e"></span>        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_click</span>(<span style="color:#a6e22e">_link</span>(<span style="color:#e6db74">&#34;Getting started&#34;</span>));                  <span style="color:#75715e">// 3
</span></span><span style="color:#75715e"></span>        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#34;Navigate to Getting Started&#34;</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>);
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_highlight</span>(<span style="color:#a6e22e">_code</span>(<span style="color:#e6db74">&#34;npm init&#34;</span>));                     <span style="color:#75715e">// 4
</span></span><span style="color:#75715e"></span>        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#34;Find npm init code sample&#34;</span>);
    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
</span>    } <span style="color:#66d9ef">finally</span> {
        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">saveResult</span>();
    }

})().<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">done</span>);</code></pre></td></tr></table>
</div>
</div>

<ol>
<li>Since we&rsquo;re dealing with a web test, the first thing we want to do is to <code>_navigateTo</code> our target page. Instead of manually setting up the correct WebDriver instance, we just have to provide a target URL, Sakuli will take care of the rest for us. <code>await</code> indicates that we are patiently waiting for our page to load, before we continue with our next teststep.</li>
<li>Once our initial page load has completed, it&rsquo;s of great interest for us how long it took to render. When it comes to runtime, Sakuli not only measures execution time of testcases, but also allows to split a single testcase into several logical steps. This way its possible to accurately measure the runtime of certain processes like e.g. <em>login</em>, <em>shopping cart</em>, <em>checkout</em> and so on. By calling <code>testCase.endOfStep(&quot;Open Landing Page&quot;, 5, 10);</code>, we&rsquo;re ending our first step, the initial page load. In addition it&rsquo;s also possible to specify <code>warning</code> and <code>critical</code> thresholds for each step. Whenever a steps exceeds on of these values, its result will change from <code>OK</code> to <code>WARNING</code> or <code>CRITICAL</code>.</li>
<li>With Sakuli it&rsquo;s really easy to interact with web elements. In our current example we want to <code>_click</code> a <code>_link</code> which is identified by some given text. Once again, we do not have to take care of many details, Sakuli will do most of the heavy lifting for us. We&rsquo;re just passing the link text to Sakuli, which will search for our desired element using multiple identifiers. This way we do not have to worry about whether to use an id, a CSS selector or something else to identify our element. As we have already seen in our first test action, <code>await</code> will wait until our testaction has completed.</li>
<li>In some cases it is really helpful to visually verify testexecution. Sakuli comes with a buil-in <code>_highlight</code> function, which will highlight an element with a bright red border. Altough being useful, <code>_highlight</code> should be used carefully since it will increase the overall test runtime.</li>
</ol>

<h2 id="execute-your-first-test">Execute your first test</h2>

<p>Since Sakuli 2 is built with node, there are at least three different ways to execute a Sakuli test. We will take a look at each on of them.</p>

<h3 id="npx-https-www-npmjs-com-package-npx"><a href="https://www.npmjs.com/package/npx">npx</a></h3>

<p>The way we set up and configured our project in this guide, Sakuli is only available to this particular project. <code>npx</code> is a really handy tool which allows us to execute our Sakuli CLI directly from the command line, even though it is not in our PATH.</p>

<p>In order to run our first test, we just have to execute <code>npx sakuli run my-sut</code> inside our project folder (e.g. <code>/tmp/sakuli_starter</code> on *nix).
By default, Sakuli will pick up the browser configured in the <code>testsuite.properties</code> file, but with npx its possible to change the browser on the fly:
<img src="/images/gettingstarted/simple_sakuli_test.png" alt="Successful Sakuli test execution" style="max-width: 400px; float:right" /></p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">`</span>npx sakuli run my-sut --browser<span style="color:#f92672">=</span>chrome<span style="color:#e6db74">`</span></code></pre></div>
will execute our test in Chrome, while
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">`</span>npx sakuli run my-sut --browser<span style="color:#f92672">=</span>firefox<span style="color:#e6db74">`</span></code></pre></div>
will run the test in FireFox.</p>

<p>Regardless of browser choice, as long as our site didn&rsquo;t slow down, you should see a successfull test result, similar to the image on the right.</p>

<h3 id="npm-test">npm test</h3>

<p>As mentioned earlier, we installed Sakuli local to our test project.
An alternative way to execute a Sakuli test are <a href="https://docs.npmjs.com/misc/scripts">npm scripts</a>.</p>

<p>In our project folder we can find a file named <a href="https://docs.npmjs.com/files/package.json">package.json</a>, the central configuration file for npm projects.
This file contains a section called <code>scripts</code>, a collection of package local scripts which can be executed via npm.</p>

<p>A default project contains a dummy script to execute tests, similar to the following snippet:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">&#34;scripts&#34;</span>: <span style="color:#f92672">{</span>
  <span style="color:#e6db74">&#34;test&#34;</span>: <span style="color:#e6db74">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
<span style="color:#f92672">}</span>,</code></pre></div></p>

<p>The <code>test</code> script is the perfect place for us to execute our Sakuli test:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#e6db74">&#34;scripts&#34;</span>: <span style="color:#f92672">{</span>
  <span style="color:#e6db74">&#34;test&#34;</span>: <span style="color:#e6db74">&#34;sakuli run my-sut --browser=chrome&#34;</span>
<span style="color:#f92672">}</span>,</code></pre></div></p>

<p>To run the test, just execute
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm test</code></pre></div>
inside your project folder.</p>

<p>Many modern IDEs support npm scripts, so its possible to trigger testexecution directly from within your IDE!</p>

<h3 id="global-installation">Global installation</h3>

<p>If you do not want to create separate npm projects for your test suites, it is also possible to install Sakuli system-wide.
When installed with the additional flag <code>-g</code>, Sakuli will be installed system-wide and added to the PATH. (To accomplish this, you&rsquo;ll need the respective privileges on your machine.)</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i -g @sakuli/cli</code></pre></div>

<p>Once the installtion has completed, you can run your Sakuli tests from anywhere on your system by simply executing
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sakuli run $PATH_TO_TESTSUITE</code></pre></div></p>

<h3 id="congratulations">Congratulations!</h3>

<p>You wrote and executed your first Sakuli test! May there be many more to come!</p>

<h2 id="getting-started-with-native-interactions">Getting started with native interactions</h2>

    </article>
</div>


</main>
<footer>
    <nav>
        <ul>
            <li> © 2019 ConSol Consulting & Solutions Software GmbH</li>
            <li><a href="/legalnotice">Legal Notice</a></li>
            <li><a id="data-privacy-link" href="https://www.consol.com/data-privacy/" target="_blank">Data Privacy</a>
            </li>
            <li><a href="mailto:sales@consol.de?subject=Sakuli%20Contact">Contact</a></li>
        </ul>
    </nav>
</footer>
<div id="modal"></div>
<script src="/vue/index.js"></script>
</body>
</html>
